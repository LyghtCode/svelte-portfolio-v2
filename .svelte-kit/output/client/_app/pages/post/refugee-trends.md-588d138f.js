import{S as Yn,i as Gn,s as Jn,B as Be,j as x,m as E,o as $,p as Kn,q as Mn,x as P,u as T,v as M,ak as jn,k as i,e as l,t as p,n as u,c as r,a as c,g as o,d as a,b as k,f as t,L as n,D as Qn}from"../../chunks/vendor-dfb9df3e.js";import Xn from"./layout.svelte-b65b887a.js";import{I as z}from"../../chunks/Image-4d50732f.js";/* empty css                                                      */import"../../chunks/BackTo-f09ad798.js";import"../../chunks/global-164a8ca5.js";import"../../chunks/utils-419e8671.js";import"../../chunks/CornerTitle-3a53cda1.js";import"../../chunks/store-b0ba4c19.js";/* empty css                                                       */function Zn(cs){let f,_,h,H,m,b,is,As,Ha,Wa,Bs,g,Da,Is,Fa,La,Rs,Na,Ua,Ss,Ba,Cs,j,Ca,W,qa,Oa,qs,A,Va,D,Ya,Ga,Os,F,Vs,v,Ja,zs,Ka,Qa,L,Xa,Za,Ys,N,Gs,U,us,se,Js,I,ae,B,ee,ne,Ks,C,ks,te,Qs,d,pe,q,oe,le,Hs,re,ce,Xs,O,In=`<code class="language-r">data <span class="token percent-operator operator">%>%</span>
  group_by<span class="token punctuation">(</span>region_name_3<span class="token punctuation">)</span> <span class="token percent-operator operator">%>%</span>
  summarise<span class="token punctuation">(</span>textbox37 <span class="token operator">=</span> sum<span class="token punctuation">(</span>textbox37<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%>%</span>
  ggplot<span class="token punctuation">(</span>aes<span class="token punctuation">(</span>x <span class="token operator">=</span> region_name_3<span class="token punctuation">,</span> y <span class="token operator">=</span> textbox37<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
  geom_line<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span>
  labs<span class="token punctuation">(</span>title <span class="token operator">=</span> <span class="token string">"Refugee Acceptance on the Decline"</span><span class="token punctuation">,</span>
       subtitle <span class="token operator">=</span> <span class="token string">"Number of refugees accepted annually, 2002 - 2019"</span><span class="token punctuation">,</span>
       x <span class="token operator">=</span> element_blank<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       y <span class="token operator">=</span> element_blank<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
  scale_y_continuous<span class="token punctuation">(</span>labels <span class="token operator">=</span> scales<span class="token operator">::</span>comma_format<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
  scale_x_continuous<span class="token punctuation">(</span>breaks <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">2002</span><span class="token punctuation">,</span> <span class="token number">2019</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code>`,Zs,V,sa,R,ie,Ws,ue,ke,aa,Y,fs,fe,ea,w,me,Ds,he,_e,G,be,ge,na,ms,ve,ta,J,Rn='<code class="language-r">facet_geo<span class="token punctuation">(</span><span class="token operator">~</span> state<span class="token punctuation">)</span></code>',pa,hs,de,oa,K,la,_s,we,ra,bs,ye,ca,Q,Sn=`<code class="language-r">theme<span class="token punctuation">(</span>
  axis.text.x <span class="token operator">=</span> element_blank<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  axis.ticks.x <span class="token operator">=</span> element_blank<span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span></code>`,ia,gs,xe,ua,X,zn=`<code class="language-r">theme<span class="token punctuation">(</span>
  axis.line.x <span class="token operator">=</span> element_blank<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  axis.line.y <span class="token operator">=</span> element_blank<span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span></code>`,ka,vs,Ee,fa,Z,Hn=`<code class="language-undefined">theme(
    strip.background = element_rect(color = &quot;white&quot;)
)</code>`,ma,ds,$e,ha,ss,Wn=`<code class="language-r">data <span class="token percent-operator operator">%>%</span>
  group_by<span class="token punctuation">(</span>region_name_3<span class="token punctuation">,</span> state<span class="token punctuation">)</span> <span class="token percent-operator operator">%>%</span>
  summarise<span class="token punctuation">(</span>textbox37 <span class="token operator">=</span> sum<span class="token punctuation">(</span>textbox37<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%>%</span>
  ggplot<span class="token punctuation">(</span>aes<span class="token punctuation">(</span>x <span class="token operator">=</span> region_name_3<span class="token punctuation">,</span> y <span class="token operator">=</span> textbox37<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
  geom_line<span class="token punctuation">(</span>color <span class="token operator">=</span> <span class="token string">"black"</span><span class="token punctuation">)</span> <span class="token operator">+</span>
  scale_x_continuous<span class="token punctuation">(</span>breaks <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">2002</span><span class="token punctuation">,</span><span class="token number">2019</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
  scale_y_continuous<span class="token punctuation">(</span>breaks <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">12000</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
  facet_geo<span class="token punctuation">(</span><span class="token operator">~</span> state<span class="token punctuation">,</span> grid <span class="token operator">=</span> <span class="token string">"us_state_grid1"</span><span class="token punctuation">)</span> <span class="token operator">+</span>
  labs<span class="token punctuation">(</span>title <span class="token operator">=</span> <span class="token string">"Refugee Acceptance on the Decline"</span><span class="token punctuation">,</span>
       subtitle <span class="token operator">=</span> <span class="token string">"Number of refugees accepted annually, 2002 - 2019"</span><span class="token punctuation">,</span>
       x <span class="token operator">=</span> element_blank<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       y <span class="token operator">=</span> element_blank<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
  theme<span class="token punctuation">(</span>
    axis.text.x <span class="token operator">=</span> element_blank<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    axis.ticks.x <span class="token operator">=</span> element_blank<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    axis.line.x <span class="token operator">=</span> element_blank<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    axis.line.y <span class="token operator">=</span> element_blank<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    plot.title <span class="token operator">=</span> element_text<span class="token punctuation">(</span>size <span class="token operator">=</span> <span class="token number">24</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    plot.subtitle <span class="token operator">=</span> element_text<span class="token punctuation">(</span>size <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    strip.background <span class="token operator">=</span> element_rect<span class="token punctuation">(</span>color <span class="token operator">=</span> <span class="token string">"white"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span></code>`,_a,as,ba,ws,Pe,ga,ys,Te,va,S,Me,Fs,je,Ae,da,es,Dn=`<code class="language-r">geom_rect<span class="token punctuation">(</span>mapping<span class="token operator">=</span>aes<span class="token punctuation">(</span>xmin<span class="token operator">=</span><span class="token number">2009</span><span class="token punctuation">,</span> xmax<span class="token operator">=</span><span class="token number">2017</span><span class="token punctuation">,</span> ymin<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> ymax<span class="token operator">=</span><span class="token number">12000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> fill <span class="token operator">=</span> <span class="token string">"#ADD8E6"</span><span class="token punctuation">,</span> alpha <span class="token operator">=</span> <span class="token number">.05</span><span class="token punctuation">)</span> <span class="token operator">+</span>
geom_rect<span class="token punctuation">(</span>mapping<span class="token operator">=</span>aes<span class="token punctuation">(</span>xmin<span class="token operator">=</span><span class="token number">2017</span><span class="token punctuation">,</span> xmax<span class="token operator">=</span><span class="token number">2019</span><span class="token punctuation">,</span> ymin<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> ymax<span class="token operator">=</span><span class="token number">12000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> fill <span class="token operator">=</span> <span class="token string">"#FF9999"</span><span class="token punctuation">,</span> alpha <span class="token operator">=</span> <span class="token number">.05</span><span class="token punctuation">)</span> <span class="token operator">+</span></code>`,wa,xs,Ie,ya,Es,Re,xa,ns,Fn=`<code class="language-r">data <span class="token percent-operator operator">%>%</span>
  group_by<span class="token punctuation">(</span>region_name_3<span class="token punctuation">,</span> state<span class="token punctuation">)</span> <span class="token percent-operator operator">%>%</span>
  summarise<span class="token punctuation">(</span>textbox37 <span class="token operator">=</span> sum<span class="token punctuation">(</span>textbox37<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%>%</span>
  ggplot<span class="token punctuation">(</span>aes<span class="token punctuation">(</span>x <span class="token operator">=</span> region_name_3<span class="token punctuation">,</span> y <span class="token operator">=</span> textbox37<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
  geom_line<span class="token punctuation">(</span>color <span class="token operator">=</span> <span class="token string">"black"</span><span class="token punctuation">)</span> <span class="token operator">+</span>
  geom_rect<span class="token punctuation">(</span>mapping<span class="token operator">=</span>aes<span class="token punctuation">(</span>xmin<span class="token operator">=</span><span class="token number">2009</span><span class="token punctuation">,</span> xmax<span class="token operator">=</span><span class="token number">2017</span><span class="token punctuation">,</span> ymin<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> ymax<span class="token operator">=</span><span class="token number">12000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> fill <span class="token operator">=</span> <span class="token string">"#ADD8E6"</span><span class="token punctuation">,</span> alpha <span class="token operator">=</span> <span class="token number">.05</span><span class="token punctuation">)</span> <span class="token operator">+</span>
  geom_rect<span class="token punctuation">(</span>mapping<span class="token operator">=</span>aes<span class="token punctuation">(</span>xmin<span class="token operator">=</span><span class="token number">2017</span><span class="token punctuation">,</span> xmax<span class="token operator">=</span><span class="token number">2019</span><span class="token punctuation">,</span> ymin<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> ymax<span class="token operator">=</span><span class="token number">12000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> fill <span class="token operator">=</span> <span class="token string">"#FF9999"</span><span class="token punctuation">,</span> alpha <span class="token operator">=</span> <span class="token number">.05</span><span class="token punctuation">)</span> <span class="token operator">+</span>
  scale_x_continuous<span class="token punctuation">(</span>breaks <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">2002</span><span class="token punctuation">,</span><span class="token number">2019</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
  scale_y_continuous<span class="token punctuation">(</span>breaks <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">12000</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
  facet_geo<span class="token punctuation">(</span><span class="token operator">~</span> state<span class="token punctuation">,</span> grid <span class="token operator">=</span> <span class="token string">"us_state_grid1"</span><span class="token punctuation">)</span> <span class="token operator">+</span>
  labs<span class="token punctuation">(</span>title <span class="token operator">=</span> <span class="token string">"Refugee Acceptance on the Decline"</span><span class="token punctuation">,</span>
       subtitle <span class="token operator">=</span> <span class="token string">"Number of refugees accepted annually, 2002 - 2019"</span><span class="token punctuation">,</span>
       x <span class="token operator">=</span> element_blank<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       y <span class="token operator">=</span> element_blank<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
  theme<span class="token punctuation">(</span>
    axis.text.x <span class="token operator">=</span> element_blank<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    axis.ticks.x <span class="token operator">=</span> element_blank<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    axis.line.x <span class="token operator">=</span> element_blank<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    axis.line.y <span class="token operator">=</span> element_blank<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    plot.title <span class="token operator">=</span> element_text<span class="token punctuation">(</span>size <span class="token operator">=</span> <span class="token number">24</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    plot.subtitle <span class="token operator">=</span> element_text<span class="token punctuation">(</span>size <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    strip.background <span class="token operator">=</span> element_rect<span class="token punctuation">(</span>color <span class="token operator">=</span> <span class="token string">"white"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span></code>`,Ea,ts,$a,$s,Se,Pa,ps,Ta,y,ze,Ls,He,We,Ns,De,Fe,Ma,os,Le,ls,Us,Ne,ja;return f=new z({props:{alt:"A small multiples map of refugee acceptance over time, across states",src:"../images/post/refugee-trends/featured.png"}}),F=new z({props:{alt:"Washington Post small multiples map of electoral college data",src:"../images/post/refugee-trends/wapo.png"}}),N=new z({props:{alt:"Policy Viz's small multiples of overall voting results over time",src:"../images/post/refugee-trends/policyviz.jpg"}}),V=new z({props:{alt:"A small multiples map of refugee acceptance over time, across states",src:"../images/post/refugee-trends/macro.jpg"}}),K=new z({props:{alt:"first try",src:"../images/post/refugee-trends/firsttry.jpg"}}),as=new z({props:{alt:"secondtry",src:"../images/post/refugee-trends/secondtry.jpg"}}),ts=new z({props:{alt:"r version",src:"../images/post/refugee-trends/ref.png"}}),ps=new z({props:{alt:"A small multiples map of refugee acceptance over time, across states",src:"../images/post/refugee-trends/featured.png"}}),{c(){x(f.$$.fragment),_=i(),h=l("p"),H=p("In "),m=l("a"),b=p("previous projects"),is=p(", I\u2019ve explored how migration has unfolded across "),As=l("em"),Ha=p("places"),Wa=p(": where migrants travel, where they go missing, and where their journeys come to a fatal end."),Bs=i(),g=l("p"),Da=p("Next, I wanted to see how "),Is=l("em"),Fa=p("host countries"),La=p(" have approached the migrant and refugee crisis, with a particular focus on the United States. In my mind, an effective visualization of the U.S.\u2019s response to an increasing number of refugees needs to present two things: how refugee acceptance has changed "),Rs=l("em"),Na=p("over time"),Ua=p(" and how refugee acceptance differs "),Ss=l("em"),Ba=p("across states."),Cs=i(),j=l("p"),Ca=p("An effective way to present both of these trends is with a map of "),W=l("a"),qa=p("small multiple"),Oa=p(" line charts. For aesthetic purposes, it would also be nice to arrange these multiples in a shape that vaguely resembles the United States. (This also makes it easier for readers to find their state of interest.)"),qs=i(),A=l("p"),Va=p("There are examples of these types of small multiple maps across the internet. The Washington Post\u2019s "),D=l("a"),Ya=p("overview of the electoral college"),Ga=p(" was visualized in the following way:"),Os=i(),x(F.$$.fragment),Vs=i(),v=l("p"),Ja=p("You can also find an overview of "),zs=l("em"),Ka=p("why"),Qa=p(" they work, and some additional examples, on the "),L=l("a"),Xa=p("PolicyViz"),Za=p(" blog:"),Ys=i(),x(N.$$.fragment),Gs=i(),U=l("h2"),us=l("a"),se=p("Making it in R"),Js=i(),I=l("p"),ae=p("The process of creating a small multiple tile grid map is relatively easy in R (like most things done in R). It is considerably more difficult in D3.js; if you\u2019re interested in that type of thing, you can take a look at "),B=l("a"),ee=p("this code"),ne=p(" for inspiration."),Ks=i(),C=l("h4"),ks=l("a"),te=p("Step 1: Build the basic line chart"),Qs=i(),d=l("p"),pe=p("The first step (after obnoxious data "),q=l("a"),oe=p("merging"),le=p(" and cleaning) is getting a feel for the basic line chart. To do so, we can visualize the macro-level trends of refugee acceptance across "),Hs=l("em"),re=p("all states"),ce=p(" combined."),Xs=i(),O=l("pre"),Zs=i(),x(V.$$.fragment),sa=i(),R=l("p"),ie=p("Now we have the answer to our first question: "),Ws=l("strong"),ue=p("how has refugee acceptance changed over time?"),ke=p(" The answer: pretty drastically. The US accepted nearly 100,000 refugees in 2016; 2 years later, that number was barely over 20,000."),aa=i(),Y=l("h4"),fs=l("a"),fe=p("Step 2: Make small multiples"),ea=i(),w=l("p"),me=p("Next, we make 50 of these lines: one for each US state. We do so using Ryan Hafen\u2019s "),Ds=l("code"),he=p("geofacet"),_e=i(),G=l("a"),be=p("package"),ge=p("."),na=i(),ms=l("p"),ve=p("It\u2019s as simple as adding one line of code to our previous plot:"),ta=i(),J=l("pre"),pa=i(),hs=l("p"),de=p("This makes a plot that looks like this:"),oa=i(),x(K.$$.fragment),la=i(),_s=l("p"),we=p("It\u2019s alright, but not perfect! There are a few improvements we can definitely make."),ra=i(),bs=l("p"),ye=p("For one, the axis labels overlap. We already know the range of years is between 2002 and 2019 (its in our subtitle!). So we can remove our x axis labels."),ca=i(),Q=l("pre"),ia=i(),gs=l("p"),xe=p("Second, The axis lines (on both axes) seem unnecessary and (the x-axis specifically) can sometimes conceal trends for those states with lower values. Let\u2019s remove those too!"),ua=i(),X=l("pre"),ka=i(),vs=l("p"),Ee=p("Finally, I don\u2019t like huge gray boxes around my axis labels. Could we make those transparent?"),fa=i(),Z=l("pre"),ma=i(),ds=l("p"),$e=p("Add it all together (and tweak the font size), and we get this:"),ha=i(),ss=l("pre"),_a=i(),x(as.$$.fragment),ba=i(),ws=l("p"),Pe=p("Pretty good! Much better. But we can add some elements to take our visualization to the next level."),ga=i(),ys=l("p"),Te=p("Because our data spans nearly 20 years (2002 to 2019), we can overlay our small multiples with other variables of interest, such as who was President during a given period."),va=i(),S=l("p"),Me=p("We do so using "),Fs=l("code"),je=p("geom_rect"),Ae=p(":"),da=i(),es=l("pre"),wa=i(),xs=l("p"),Ie=p("The first line of code creates a blue box which spans 2009 to 2017 (Obama\u2019s tenure). The second line creates a red box for Trump\u2019s presidency (so far)."),ya=i(),Es=l("p"),Re=p("Bringing it all together, the code and output look like this:"),xa=i(),ns=l("pre"),Ea=i(),x(ts.$$.fragment),$a=i(),$s=l("p"),Se=p("I brought that plot to Illustrator and made it a lot prettier. Here\u2019s the final version:"),Pa=i(),x(ps.$$.fragment),Ta=i(),y=l("p"),ze=p("What do we notice? A few key states (Texas, California, Florida, and Michigan) make up the vast majority of refugee acceptance, while other accept almost "),Ls=l("em"),He=p("no"),We=i(),Ns=l("em"),De=p("refugees"),Fe=p(". Nearly every state has reduced their refugee acceptance since 2017, but the bulk of this decline has come from these larger states."),Ma=i(),os=l("p"),Le=p("While you\u2019re here, take a look at my project "),ls=l("a"),Us=l("em"),Ne=p("Mapping Missing Migrants."),this.h()},l(s){E(f.$$.fragment,s),_=u(s),h=r(s,"P",{});var e=c(h);H=o(e,"In "),m=r(e,"A",{href:!0,rel:!0});var Ce=c(m);b=o(Ce,"previous projects"),Ce.forEach(a),is=o(e,", I\u2019ve explored how migration has unfolded across "),As=r(e,"EM",{});var qe=c(As);Ha=o(qe,"places"),qe.forEach(a),Wa=o(e,": where migrants travel, where they go missing, and where their journeys come to a fatal end."),e.forEach(a),Bs=u(s),g=r(s,"P",{});var rs=c(g);Da=o(rs,"Next, I wanted to see how "),Is=r(rs,"EM",{});var Oe=c(Is);Fa=o(Oe,"host countries"),Oe.forEach(a),La=o(rs," have approached the migrant and refugee crisis, with a particular focus on the United States. In my mind, an effective visualization of the U.S.\u2019s response to an increasing number of refugees needs to present two things: how refugee acceptance has changed "),Rs=r(rs,"EM",{});var Ve=c(Rs);Na=o(Ve,"over time"),Ve.forEach(a),Ua=o(rs," and how refugee acceptance differs "),Ss=r(rs,"EM",{});var Ye=c(Ss);Ba=o(Ye,"across states."),Ye.forEach(a),rs.forEach(a),Cs=u(s),j=r(s,"P",{});var Aa=c(j);Ca=o(Aa,"An effective way to present both of these trends is with a map of "),W=r(Aa,"A",{href:!0,rel:!0});var Ge=c(W);qa=o(Ge,"small multiple"),Ge.forEach(a),Oa=o(Aa," line charts. For aesthetic purposes, it would also be nice to arrange these multiples in a shape that vaguely resembles the United States. (This also makes it easier for readers to find their state of interest.)"),Aa.forEach(a),qs=u(s),A=r(s,"P",{});var Ia=c(A);Va=o(Ia,"There are examples of these types of small multiple maps across the internet. The Washington Post\u2019s "),D=r(Ia,"A",{href:!0,rel:!0});var Je=c(D);Ya=o(Je,"overview of the electoral college"),Je.forEach(a),Ga=o(Ia," was visualized in the following way:"),Ia.forEach(a),Os=u(s),E(F.$$.fragment,s),Vs=u(s),v=r(s,"P",{});var Ps=c(v);Ja=o(Ps,"You can also find an overview of "),zs=r(Ps,"EM",{});var Ke=c(zs);Ka=o(Ke,"why"),Ke.forEach(a),Qa=o(Ps," they work, and some additional examples, on the "),L=r(Ps,"A",{href:!0,rel:!0});var Qe=c(L);Xa=o(Qe,"PolicyViz"),Qe.forEach(a),Za=o(Ps," blog:"),Ps.forEach(a),Ys=u(s),E(N.$$.fragment,s),Gs=u(s),U=r(s,"H2",{id:!0});var Xe=c(U);us=r(Xe,"A",{href:!0});var Ze=c(us);se=o(Ze,"Making it in R"),Ze.forEach(a),Xe.forEach(a),Js=u(s),I=r(s,"P",{});var Ra=c(I);ae=o(Ra,"The process of creating a small multiple tile grid map is relatively easy in R (like most things done in R). It is considerably more difficult in D3.js; if you\u2019re interested in that type of thing, you can take a look at "),B=r(Ra,"A",{href:!0,rel:!0});var sn=c(B);ee=o(sn,"this code"),sn.forEach(a),ne=o(Ra," for inspiration."),Ra.forEach(a),Ks=u(s),C=r(s,"H4",{id:!0});var an=c(C);ks=r(an,"A",{href:!0});var en=c(ks);te=o(en,"Step 1: Build the basic line chart"),en.forEach(a),an.forEach(a),Qs=u(s),d=r(s,"P",{});var Ts=c(d);pe=o(Ts,"The first step (after obnoxious data "),q=r(Ts,"A",{href:!0,rel:!0});var nn=c(q);oe=o(nn,"merging"),nn.forEach(a),le=o(Ts," and cleaning) is getting a feel for the basic line chart. To do so, we can visualize the macro-level trends of refugee acceptance across "),Hs=r(Ts,"EM",{});var tn=c(Hs);re=o(tn,"all states"),tn.forEach(a),ce=o(Ts," combined."),Ts.forEach(a),Xs=u(s),O=r(s,"PRE",{class:!0});var Ln=c(O);Ln.forEach(a),Zs=u(s),E(V.$$.fragment,s),sa=u(s),R=r(s,"P",{});var Sa=c(R);ie=o(Sa,"Now we have the answer to our first question: "),Ws=r(Sa,"STRONG",{});var pn=c(Ws);ue=o(pn,"how has refugee acceptance changed over time?"),pn.forEach(a),ke=o(Sa," The answer: pretty drastically. The US accepted nearly 100,000 refugees in 2016; 2 years later, that number was barely over 20,000."),Sa.forEach(a),aa=u(s),Y=r(s,"H4",{id:!0});var on=c(Y);fs=r(on,"A",{href:!0});var ln=c(fs);fe=o(ln,"Step 2: Make small multiples"),ln.forEach(a),on.forEach(a),ea=u(s),w=r(s,"P",{});var Ms=c(w);me=o(Ms,"Next, we make 50 of these lines: one for each US state. We do so using Ryan Hafen\u2019s "),Ds=r(Ms,"CODE",{});var rn=c(Ds);he=o(rn,"geofacet"),rn.forEach(a),_e=u(Ms),G=r(Ms,"A",{href:!0,rel:!0});var cn=c(G);be=o(cn,"package"),cn.forEach(a),ge=o(Ms,"."),Ms.forEach(a),na=u(s),ms=r(s,"P",{});var un=c(ms);ve=o(un,"It\u2019s as simple as adding one line of code to our previous plot:"),un.forEach(a),ta=u(s),J=r(s,"PRE",{class:!0});var Nn=c(J);Nn.forEach(a),pa=u(s),hs=r(s,"P",{});var kn=c(hs);de=o(kn,"This makes a plot that looks like this:"),kn.forEach(a),oa=u(s),E(K.$$.fragment,s),la=u(s),_s=r(s,"P",{});var fn=c(_s);we=o(fn,"It\u2019s alright, but not perfect! There are a few improvements we can definitely make."),fn.forEach(a),ra=u(s),bs=r(s,"P",{});var mn=c(bs);ye=o(mn,"For one, the axis labels overlap. We already know the range of years is between 2002 and 2019 (its in our subtitle!). So we can remove our x axis labels."),mn.forEach(a),ca=u(s),Q=r(s,"PRE",{class:!0});var Un=c(Q);Un.forEach(a),ia=u(s),gs=r(s,"P",{});var hn=c(gs);xe=o(hn,"Second, The axis lines (on both axes) seem unnecessary and (the x-axis specifically) can sometimes conceal trends for those states with lower values. Let\u2019s remove those too!"),hn.forEach(a),ua=u(s),X=r(s,"PRE",{class:!0});var Bn=c(X);Bn.forEach(a),ka=u(s),vs=r(s,"P",{});var _n=c(vs);Ee=o(_n,"Finally, I don\u2019t like huge gray boxes around my axis labels. Could we make those transparent?"),_n.forEach(a),fa=u(s),Z=r(s,"PRE",{class:!0});var Cn=c(Z);Cn.forEach(a),ma=u(s),ds=r(s,"P",{});var bn=c(ds);$e=o(bn,"Add it all together (and tweak the font size), and we get this:"),bn.forEach(a),ha=u(s),ss=r(s,"PRE",{class:!0});var qn=c(ss);qn.forEach(a),_a=u(s),E(as.$$.fragment,s),ba=u(s),ws=r(s,"P",{});var gn=c(ws);Pe=o(gn,"Pretty good! Much better. But we can add some elements to take our visualization to the next level."),gn.forEach(a),ga=u(s),ys=r(s,"P",{});var vn=c(ys);Te=o(vn,"Because our data spans nearly 20 years (2002 to 2019), we can overlay our small multiples with other variables of interest, such as who was President during a given period."),vn.forEach(a),va=u(s),S=r(s,"P",{});var za=c(S);Me=o(za,"We do so using "),Fs=r(za,"CODE",{});var dn=c(Fs);je=o(dn,"geom_rect"),dn.forEach(a),Ae=o(za,":"),za.forEach(a),da=u(s),es=r(s,"PRE",{class:!0});var On=c(es);On.forEach(a),wa=u(s),xs=r(s,"P",{});var wn=c(xs);Ie=o(wn,"The first line of code creates a blue box which spans 2009 to 2017 (Obama\u2019s tenure). The second line creates a red box for Trump\u2019s presidency (so far)."),wn.forEach(a),ya=u(s),Es=r(s,"P",{});var yn=c(Es);Re=o(yn,"Bringing it all together, the code and output look like this:"),yn.forEach(a),xa=u(s),ns=r(s,"PRE",{class:!0});var Vn=c(ns);Vn.forEach(a),Ea=u(s),E(ts.$$.fragment,s),$a=u(s),$s=r(s,"P",{});var xn=c($s);Se=o(xn,"I brought that plot to Illustrator and made it a lot prettier. Here\u2019s the final version:"),xn.forEach(a),Pa=u(s),E(ps.$$.fragment,s),Ta=u(s),y=r(s,"P",{});var js=c(y);ze=o(js,"What do we notice? A few key states (Texas, California, Florida, and Michigan) make up the vast majority of refugee acceptance, while other accept almost "),Ls=r(js,"EM",{});var En=c(Ls);He=o(En,"no"),En.forEach(a),We=u(js),Ns=r(js,"EM",{});var $n=c(Ns);De=o($n,"refugees"),$n.forEach(a),Fe=o(js,". Nearly every state has reduced their refugee acceptance since 2017, but the bulk of this decline has come from these larger states."),js.forEach(a),Ma=u(s),os=r(s,"P",{});var Ue=c(os);Le=o(Ue,"While you\u2019re here, take a look at my project "),ls=r(Ue,"A",{href:!0,rel:!0});var Pn=c(ls);Us=r(Pn,"EM",{});var Tn=c(Us);Ne=o(Tn,"Mapping Missing Migrants."),Tn.forEach(a),Pn.forEach(a),Ue.forEach(a),this.h()},h(){k(m,"href","https://connorrothschild.github.io/map-missing-migrants/"),k(m,"rel","nofollow"),k(W,"href","https://en.wikipedia.org/wiki/Small_multiple"),k(W,"rel","nofollow"),k(D,"href","https://www.washingtonpost.com/graphics/politics/how-fair-is-the-electoral-college/"),k(D,"rel","nofollow"),k(L,"href","https://policyviz.com/2016/05/19/small-multiple-tile-grid-map/"),k(L,"rel","nofollow"),k(us,"href","#making-it-in-r"),k(U,"id","making-it-in-r"),k(B,"href","https://bl.ocks.org/jinniluo/a95b27b1f4ea65ae94ab6ca3fcfb5934#index.html"),k(B,"rel","nofollow"),k(ks,"href","#step-1-build-the-basic-line-chart"),k(C,"id","step-1-build-the-basic-line-chart"),k(q,"href","https://raw.githubusercontent.com/connorrothschild/R/master/refugee-trends/merge.R"),k(q,"rel","nofollow"),k(O,"class","language-r"),k(fs,"href","#step-2-make-small-multiples"),k(Y,"id","step-2-make-small-multiples"),k(G,"href","https://hafen.github.io/geofacet/rd.html"),k(G,"rel","nofollow"),k(J,"class","language-r"),k(Q,"class","language-r"),k(X,"class","language-r"),k(Z,"class","language-undefined"),k(ss,"class","language-r"),k(es,"class","language-r"),k(ns,"class","language-r"),k(ls,"href","https://connorrothschild.github.io/map-missing-migrants/"),k(ls,"rel","nofollow")},m(s,e){$(f,s,e),t(s,_,e),t(s,h,e),n(h,H),n(h,m),n(m,b),n(h,is),n(h,As),n(As,Ha),n(h,Wa),t(s,Bs,e),t(s,g,e),n(g,Da),n(g,Is),n(Is,Fa),n(g,La),n(g,Rs),n(Rs,Na),n(g,Ua),n(g,Ss),n(Ss,Ba),t(s,Cs,e),t(s,j,e),n(j,Ca),n(j,W),n(W,qa),n(j,Oa),t(s,qs,e),t(s,A,e),n(A,Va),n(A,D),n(D,Ya),n(A,Ga),t(s,Os,e),$(F,s,e),t(s,Vs,e),t(s,v,e),n(v,Ja),n(v,zs),n(zs,Ka),n(v,Qa),n(v,L),n(L,Xa),n(v,Za),t(s,Ys,e),$(N,s,e),t(s,Gs,e),t(s,U,e),n(U,us),n(us,se),t(s,Js,e),t(s,I,e),n(I,ae),n(I,B),n(B,ee),n(I,ne),t(s,Ks,e),t(s,C,e),n(C,ks),n(ks,te),t(s,Qs,e),t(s,d,e),n(d,pe),n(d,q),n(q,oe),n(d,le),n(d,Hs),n(Hs,re),n(d,ce),t(s,Xs,e),t(s,O,e),O.innerHTML=In,t(s,Zs,e),$(V,s,e),t(s,sa,e),t(s,R,e),n(R,ie),n(R,Ws),n(Ws,ue),n(R,ke),t(s,aa,e),t(s,Y,e),n(Y,fs),n(fs,fe),t(s,ea,e),t(s,w,e),n(w,me),n(w,Ds),n(Ds,he),n(w,_e),n(w,G),n(G,be),n(w,ge),t(s,na,e),t(s,ms,e),n(ms,ve),t(s,ta,e),t(s,J,e),J.innerHTML=Rn,t(s,pa,e),t(s,hs,e),n(hs,de),t(s,oa,e),$(K,s,e),t(s,la,e),t(s,_s,e),n(_s,we),t(s,ra,e),t(s,bs,e),n(bs,ye),t(s,ca,e),t(s,Q,e),Q.innerHTML=Sn,t(s,ia,e),t(s,gs,e),n(gs,xe),t(s,ua,e),t(s,X,e),X.innerHTML=zn,t(s,ka,e),t(s,vs,e),n(vs,Ee),t(s,fa,e),t(s,Z,e),Z.innerHTML=Hn,t(s,ma,e),t(s,ds,e),n(ds,$e),t(s,ha,e),t(s,ss,e),ss.innerHTML=Wn,t(s,_a,e),$(as,s,e),t(s,ba,e),t(s,ws,e),n(ws,Pe),t(s,ga,e),t(s,ys,e),n(ys,Te),t(s,va,e),t(s,S,e),n(S,Me),n(S,Fs),n(Fs,je),n(S,Ae),t(s,da,e),t(s,es,e),es.innerHTML=Dn,t(s,wa,e),t(s,xs,e),n(xs,Ie),t(s,ya,e),t(s,Es,e),n(Es,Re),t(s,xa,e),t(s,ns,e),ns.innerHTML=Fn,t(s,Ea,e),$(ts,s,e),t(s,$a,e),t(s,$s,e),n($s,Se),t(s,Pa,e),$(ps,s,e),t(s,Ta,e),t(s,y,e),n(y,ze),n(y,Ls),n(Ls,He),n(y,We),n(y,Ns),n(Ns,De),n(y,Fe),t(s,Ma,e),t(s,os,e),n(os,Le),n(os,ls),n(ls,Us),n(Us,Ne),ja=!0},p:Qn,i(s){ja||(P(f.$$.fragment,s),P(F.$$.fragment,s),P(N.$$.fragment,s),P(V.$$.fragment,s),P(K.$$.fragment,s),P(as.$$.fragment,s),P(ts.$$.fragment,s),P(ps.$$.fragment,s),ja=!0)},o(s){T(f.$$.fragment,s),T(F.$$.fragment,s),T(N.$$.fragment,s),T(V.$$.fragment,s),T(K.$$.fragment,s),T(as.$$.fragment,s),T(ts.$$.fragment,s),T(ps.$$.fragment,s),ja=!1},d(s){M(f,s),s&&a(_),s&&a(h),s&&a(Bs),s&&a(g),s&&a(Cs),s&&a(j),s&&a(qs),s&&a(A),s&&a(Os),M(F,s),s&&a(Vs),s&&a(v),s&&a(Ys),M(N,s),s&&a(Gs),s&&a(U),s&&a(Js),s&&a(I),s&&a(Ks),s&&a(C),s&&a(Qs),s&&a(d),s&&a(Xs),s&&a(O),s&&a(Zs),M(V,s),s&&a(sa),s&&a(R),s&&a(aa),s&&a(Y),s&&a(ea),s&&a(w),s&&a(na),s&&a(ms),s&&a(ta),s&&a(J),s&&a(pa),s&&a(hs),s&&a(oa),M(K,s),s&&a(la),s&&a(_s),s&&a(ra),s&&a(bs),s&&a(ca),s&&a(Q),s&&a(ia),s&&a(gs),s&&a(ua),s&&a(X),s&&a(ka),s&&a(vs),s&&a(fa),s&&a(Z),s&&a(ma),s&&a(ds),s&&a(ha),s&&a(ss),s&&a(_a),M(as,s),s&&a(ba),s&&a(ws),s&&a(ga),s&&a(ys),s&&a(va),s&&a(S),s&&a(da),s&&a(es),s&&a(wa),s&&a(xs),s&&a(ya),s&&a(Es),s&&a(xa),s&&a(ns),s&&a(Ea),M(ts,s),s&&a($a),s&&a($s),s&&a(Pa),M(ps,s),s&&a(Ta),s&&a(y),s&&a(Ma),s&&a(os)}}}function st(cs){let f,_;const h=[cs[0],An];let H={$$slots:{default:[Zn]},$$scope:{ctx:cs}};for(let m=0;m<h.length;m+=1)H=Be(H,h[m]);return f=new Xn({props:H}),{c(){x(f.$$.fragment)},l(m){E(f.$$.fragment,m)},m(m,b){$(f,m,b),_=!0},p(m,[b]){const is=b&1?Kn(h,[b&1&&Mn(m[0]),b&0&&Mn(An)]):{};b&2&&(is.$$scope={dirty:b,ctx:m}),f.$set(is)},i(m){_||(P(f.$$.fragment,m),_=!0)},o(m){T(f.$$.fragment,m),_=!1},d(m){M(f,m)}}}const An={layout:"blog",title:"Trends in Refugee Acceptance, 2002 to 2019",description:"Or, how a single line of code can create a beautiful small multiples US map.",date:"2020-02-02",image:"refugee-trends/header.png",archived:!0,tags:["analysis","r"]};function at(cs,f,_){return cs.$$set=h=>{_(0,f=Be(Be({},f),jn(h)))},f=jn(f),[f]}class kt extends Yn{constructor(f){super();Gn(this,f,at,st,Jn,{})}}export{kt as default,An as metadata};

<script>
  export let width = 24;
  export let height = 24;
  export let fill = "black";
  export let stroke = "transparent";
  export let hovered;
  export let index;

  import { gsap } from "gsap";
  import { MorphSVGPlugin } from "gsap/dist/MorphSVGPlugin.js";

  import { onMount } from "svelte";

  gsap.registerPlugin(MorphSVGPlugin);

  let star;
  onMount(() => {
    star = MorphSVGPlugin.convertToPath(`#star-${index}`);
  });

  const changePath = function () {
    if (hovered == true) {
      gsap.to(star, {
        duration: 0.3,
        morphSVG: arrowPath,
      });
    } else {
      gsap.to(star, {
        duration: 0.3,
        morphSVG: starPath,
      });
    }
  };
  const arrowPath =
    "M 2.398438 1.414062 L 2.398438 4.320312 C 2.398438 4.441406 2.496094 4.535156 2.617188 4.535156 L 17.015625 4.535156 L 1.152344 20.425781 C 1.054688 20.519531 1.054688 20.664062 1.152344 20.734375 L 3.191406 22.777344 C 3.289062 22.871094 3.433594 22.871094 3.503906 22.777344 L 19.488281 6.792969 L 19.488281 21.433594 C 19.488281 21.550781 19.585938 21.648438 19.703125 21.648438 L 22.609375 21.648438 C 22.726562 21.648438 22.824219 21.550781 22.824219 21.433594 L 22.824219 1.414062 C 22.824219 1.296875 22.726562 1.199219 22.609375 1.199219 L 2.617188 1.199219 C 2.496094 1.199219 2.398438 1.296875 2.398438 1.414062 Z M 2.398438 1.414062";

  const starPath =
    "M 18.523438 12.539062 C 18.523438 12.539062 18.347656 14.273438 17.601562 13.503906 C 16.855469 12.738281 18.613281 9.703125 17.796875 7.945312 C 16.984375 6.1875 14.085938 4.914062 14.085938 4.914062 C 14.085938 4.914062 15.929688 6.671875 15.402344 7.175781 C 14.875 7.683594 12.875 7 11.910156 5.375 C 10.941406 3.75 12.105469 1.199219 12.105469 1.199219 C 12.105469 1.199219 10.171875 2.210938 9.933594 4.058594 C 9.691406 5.902344 10.128906 7.175781 10.347656 9.066406 C 10.570312 10.957031 9.933594 13.503906 8.238281 13.265625 C 6.546875 13.023438 7.535156 10.210938 7.535156 10.210938 C 7.535156 10.210938 2.371094 15.285156 5.558594 19.417969 C 8.746094 23.546875 12.546875 22.734375 12.546875 22.734375 C 13.878906 22.761719 15.265625 22.34375 16.332031 21.535156 C 16.347656 21.523438 16.363281 21.511719 16.378906 21.5 C 21.738281 17.679688 18.523438 12.539062 18.523438 12.539062 Z M 18.523438 12.539062 ";
  // /* OTHER FIRE */ "M 19.609375 14.28125 C 19.609375 11.863281 18.460938 9.460938 16.53125 7.851562 L 16.277344 7.648438 C 15.984375 7.410156 15.535156 7.5 15.371094 7.84375 C 15.292969 8.011719 15.238281 9.699219 15.238281 9.980469 C 15.238281 10.039062 15.226562 10.132812 15.226562 10.144531 C 15.226562 10.382812 15.011719 10.574219 14.765625 10.53125 C 14.570312 10.5 14.4375 10.316406 14.4375 10.117188 C 14.425781 7.234375 13.542969 5.222656 11.925781 3.722656 C 10.9375 2.804688 9.765625 1.992188 9.410156 2.625 C 9.316406 2.785156 9.46875 3.148438 9.621094 3.613281 C 9.957031 4.648438 8.925781 6.300781 7.46875 7.953125 C 6.097656 9.503906 4.390625 11.433594 4.390625 14.28125 C 4.390625 18.113281 8.015625 21.601562 12 21.601562 C 15.984375 21.601562 19.609375 18.113281 19.609375 14.28125 Z M 19.609375 14.28125 ";
  // /* STAR */ "M12 .587l3.668 7.568 8.332 1.151-6.064 5.828 1.48 8.279-7.416-3.967-7.417 3.967 1.481-8.279-6.064-5.828 8.332-1.151z";

  $: hovered, changePath(hovered);
</script>

<svg
  xmlns="http://www.w3.org/2000/svg"
  {width}
  {height}
  viewBox="0 0 24 24"
  {fill}
  {stroke}
>
  <path id="star-{index}" d={starPath} />
</svg>

<style>
  svg {
    pointer-events: none;
  }
</style>
